(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a(264),i=a(260),l=a(49),m=1.488095238095238,s=.492*m,u=a(27);function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){h(e,t,a[t])})}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=function(e){return Math.max(Math.min(75e3/3600,8.333333333333332*(e/4-1)),0)},y={play:!1,cars:[],time:0,numCars:0,history:[]},g=Object(u.a)(function(e,t){return e%t<t/2}),E=function(e,t){switch(t.type){case"TICK":var a=t.payload,n=g(e.time,40),r=e.cars.map(function(e,t,r){var c=0===t?1/0:r[t-1];return!n&&e<=128&&(c=Math.min(c,132)),Math.min(c,e+p(c-e)*a)}).filter(function(e){return e<160}),c=e.numCars-r.length,o=e.time,i=e.history.map(function(e,t){return t<c?e:[].concat(d(e),[[o,r[t-c]]])});return f({},e,{history:i,cars:r,time:e.time+a});case"ADD":var l=Math.min(-75e3/3600/s+e.cars[e.cars.length-1]-1||-20,-20),m=[e.time,l];return f({},e,{numCars:e.numCars+1,history:[].concat(d(e.history),[[m]]),cars:[].concat(d(e.cars),[l])});case"SET_PLAY":return f({},e,{play:t.payload});case"RESET":return f({},e,{time:0,history:[],numCars:0,cars:[]});default:return e}},b=r.a.createContext({state:y,dispatch:null}),v=a(10),j=a(22),x=a.n(j),w=(a(36),a(141)),O=a(258),k=a(6),A=Object(w.a)(Object(O.a)({svg:{"& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}},math:{fontSize:"12px"},trajectory:{fill:"none",stroke:k.a.lightBlue.A400,strokeWidth:"2px"},hidden:{fill:"white",opacity:0},marker:{fill:k.a.lightBlue.A700}})),C=a(38),N=a.n(C),M=Object(w.a)({road:{stroke:k.a.grey[300]},car:{fill:k.a.purple.A400,rx:1,ry:1},svg:function(e){return{width:e.width,height:e.height,display:"block","& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}}},light:{strokeWidth:"5px",fill:"none",stroke:function(e){return e.isGreen?k.a.green.A700:k.a.red.A400}},text:{textAlign:"center",fontSize:"12px",fontFamily:"Puritan, sans-serif"}}),S=function(e){var t=e.width,a=e.height,c=Object(n.useContext)(b).state,o=M({width:t,height:a,isGreen:g(c.time,40)}),i=Object(n.useMemo)(function(){return Object(v.a)().range([0,t]).domain([0,160])},[t]),l=Object(n.useMemo)(function(){return Object(v.a)().range([a,0]).domain([0,20])},[a]),m=i(128),s=a-l(10),u=i(3),f=a-l(2);return r.a.createElement("g",{transform:"translate(0,".concat(a/2-s/2,")")},r.a.createElement("path",{className:o.road,d:"M0,0L".concat(t,",0 M").concat(m+s/2,",").concat(-a/2,"L").concat(m+s/2,",").concat(a/2),strokeWidth:s}),r.a.createElement("path",{className:o.light,d:"M".concat(m+2,",").concat(-s/2,"L").concat(m+2,",").concat(s/2)}),c.cars.map(function(e,t){return r.a.createElement("rect",{key:t,className:o.car,transform:"translate(".concat(i(e)-u,",").concat(-f/2,")"),width:u,height:f})}))};function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=10,T=20,z={width:700+T+44,height:350+P+10},I=Object(v.a)().domain([0,160]).range([350,0]),D=Object(v.a)().domain([0,100]).range([0,700]),R="translate(".concat(T,",").concat(P,")"),W=(Array.apply(null,{length:50}).map(function(e,t){return t}),r.a.createElement("mask",{id:"myMask"},r.a.createElement("rect",{width:700,height:350,fill:"white"}))),F=r.a.memo(function(e){var t=e.mathClass;return r.a.createElement("g",{transform:"translate(0,".concat(I(128),")")},r.a.createElement("path",{d:"M0,0L".concat(700,",0"),fill:"none",stroke:"black"}),r.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(703,",-10)")},r.a.createElement("span",{className:t},r.a.createElement(x.a,{math:"t \\; \\text{(sec)}"}))))}),B=r.a.memo(function(e){var t=e.mathClass;return r.a.createElement("g",null,r.a.createElement("path",{d:"M0,0L0,".concat(350),fill:"none",stroke:"black"}),r.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(5,-10)"},r.a.createElement("span",{className:t},r.a.createElement(x.a,{math:"x \\; \\text{(m)}"}))))}),Y=r.a.memo(function(e){var t=e.trajectory,a=e.className;return Object(n.createElement)("path",{className:a,d:N()(t.map(function(e){var t=L(e,2),a=t[0],n=t[1];return{x:D(a),y:I(n)}}),.5).reduce(function(e,t){return e+t.x+","+t.y+" "},"M")})}),G=r.a.memo(function(e){var t=e.className;return r.a.createElement("defs",null,r.a.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",className:t},r.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})))}),J={},K={mask:"url(#myMask)"},_=function(){var e=A(J),t=Object(n.useContext)(b).state;return r.a.createElement("svg",{className:e.svg,style:z},r.a.createElement(G,{className:e.marker}),r.a.createElement("g",{transform:R},W,r.a.createElement("g",{transform:"translate(".concat(D(t.time),",").concat(350,") rotate(-90)")},r.a.createElement(S,{height:30,width:350})),r.a.createElement("g",{style:K},t.history.map(function(t,a){return Object(n.createElement)(Y,{className:e.trajectory,trajectory:t,key:a})})),r.a.createElement(F,{mathClass:e.math}),r.a.createElement(B,{mathClass:e.math})))},q=Object(w.a)({svg:{"& text":{fontFamily:"Puritan, san-serif",fontSize:"13px"}},math:{fontSize:"12px"},path:{fill:"none",strokeWidth:2,stroke:k.a.blue.A400},hidden:{fill:"white",opacity:0}}),H=10,U=40,X=40,Q=10,V=Object(v.a)().domain([0,.25]).range([0,200]),Z=Object(v.a)().domain([0,1.2*m]).range([400/3,0]),$=(Object(u.a)(function(e,t){return"translate(".concat(e,",").concat(t,")")}),Array.apply(null,{length:50}).map(function(e,t){return t})),ee=r.a.createElement("mask",{id:"myMask"},r.a.createElement("rect",{width:200,height:400/3,fill:"white"})),te=r.a.memo(function(e){var t=e.mathClass;return r.a.createElement("g",{transform:"translate(0,".concat(400/3,")")},r.a.createElement("path",{d:"M0,0L".concat(200,",0"),fill:"none",stroke:"black"}),r.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(203,",-10)")},r.a.createElement("span",{className:t},r.a.createElement(x.a,{math:"k \\; \\text{(veh/km)}"}))))}),ae=r.a.memo(function(e){var t=e.mathClass;return r.a.createElement("g",null,r.a.createElement("path",{d:"M0,0L0,".concat(400/3),fill:"none",stroke:"black"}),r.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(5,-10)"},r.a.createElement("span",{className:t},r.a.createElement(x.a,{math:"q \\; \\text{(veh/min)}"}))))}),ne=function(e){return Math.min(e*(75e3/3600),8.333333333333332*(.25-e))},re=r.a.memo(function(e){var t=e.className;return Object(n.createElement)("path",{className:t,d:"M"+$.map(function(e){return e/($.length-1)*.25}).map(function(e){return[V(e),Z(ne(e))]}).join("L")})}),ce={},oe={height:400/3+H+U,width:200+X+Q},ie="translate(".concat(X,",").concat(H,")"),le=function(){var e=q(ce);return r.a.createElement("svg",{className:e.svg,style:oe},r.a.createElement("g",{transform:ie},ee,r.a.createElement("rect",{className:e.hidden,width:200,height:400/3}),r.a.createElement(te,{mathClass:e.math}),r.a.createElement(ae,{mathClass:e.math}),r.a.createElement(re,{className:e.path})))},me=a(259),se=Object(me.a)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif"}},main:{maxWidth:"900px",color:k.a.grey[800],margin:"0 auto",boxSizing:"border-box",display:"flex",flexDirection:"column"},red:{fill:k.a.red.A400},paper:{maxWidth:"500px",margin:"auto",display:"flex",padding:"20px",flexDirection:"row",alignItems:"center"},button:{margin:"5px"},visContainer:{margin:"0 auto"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}});function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var fe={},he=function(){var e=Object(n.useContext)(b),t=e.state,a=e.dispatch,c=t.play,m=se(fe);return function(e,t){var a=Object(n.useRef)(0);a.current=e,Object(n.useLayoutEffect)(function(){if(t){var e=0,n=Object(l.a)(function(t){var n=(t-e)/1e3;e=t,a.current&&a.current(n)});return function(){return n.stop()}}},[t])}(function(e){e/=.45,a({type:"TICK",payload:Math.min(e,.05)})},c),t.time>100&&a({type:"RESET"}),function(e,t,a){var r=Object(n.useRef)(0);r.current=e,Object(n.useLayoutEffect)(function(){if(a){var e=setInterval(function(){r.current&&r.current()},1e3*t);return function(){return clearInterval(e)}}},[t,a])}(function(){return a({type:"ADD"})},1/s*.45,c),r.a.createElement("div",{className:m.main},r.a.createElement(i.a,{className:m.paper,elevation:2},r.a.createElement(o.a,{className:m.button,variant:"contained",color:"secondary",onClick:function(){return a({type:"SET_PLAY",payload:!c})}},c?"PAUSE":"PLAY"),r.a.createElement(o.a,{className:m.button,variant:"contained",color:"secondary",onClick:function(){a({type:"RESET"})}},"Reset")),r.a.createElement(_,null),r.a.createElement(le,null))},de=a(262),pe=a(48),ye=a(46),ge=a.n(ye),Ee=a(47),be=a.n(Ee),ve=document.getElementById("root");if(!ve)throw Error("no root container");var je=Object(pe.a)({palette:{primary:{main:ge.a[500]},secondary:{main:be.a[500]}}});Object(c.render)(r.a.createElement(de.a,{theme:je},r.a.createElement(function(){var e=ue(Object(n.useReducer)(E,y),2),t=e[0],a=e[1];return r.a.createElement(b.Provider,{value:{state:t,dispatch:a}},r.a.createElement(he,null))},null)),ve)}},[[139,1,2]]]);